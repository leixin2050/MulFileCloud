# MulFileCloud
一般我们要下载比如一个电影的话，最简单就是两种方式，一个是HTTP协议，通过浏览器下载，但是这个在文件稍微一大的时候，会把你卡崩溃。

还有一种就是FTP（文件传输协议） FTP采用两个 TCP 连接来传输一个文件。

但是无论是HTTP还是FTP，都难以解决单一服务器的带宽压力。因为它们都使用的是传统的客户端服务器的方式。

这时候，P2P协议应运而生，资源开始并不集中在服务器上，而是分散地存储在多台设备上。当用户要下载文件的时候，不需要到服务器上下，可以直接在就近的设备上下载。下载成功之后，你也成为了这些设备中的一员（peer），当你附近有设备需要下载文件时，可能就会从你这里下载。所以这个P2P网络参与的人越多，下载就越快。

关于网络协议我就不再多说，并不是这篇文章的目的。从上面的P2P协议出发，可以引出我的多文件自平衡云传输项目。

这个框架要实现的就是，当一台机器请求从服务器下载文件的时候，服务器会让有这个文件的设备一起向请求的设备发送文件，每个设备发送一部分，最终在要下载文件的机器上拼凑成一个完整的文件。
![3](https://user-images.githubusercontent.com/107662018/182082744-1ccdfdaa-2ca4-4549-824f-d0716668855b.png)

和P2P协议不同的是，P2P协议是一对一的，从就近的设备传输文件，而多文件云传输做的是多个设备一起传输文件，显然这样会更加快。

比如现在，第一次，客户端B向服务器请求文件1。

在这里插入图片描述![20210131151144219](https://user-images.githubusercontent.com/107662018/182082459-411ce396-a0d8-45b6-981e-e36651c64645.png)


那现在客户端A也要下载文件文件1，这时候客户端B也会给客户端A一起传输文件1，有可能服务器传百分之十，客户端B传百分之九十，然后服务器传输的百分之十和客户端B传输的百分之九十最终在客户端A拼接成完整的文件。
在这里插入图片描述![2](https://user-images.githubusercontent.com/107662018/182082632-6bea7c3b-a054-4fcd-8cac-0f0712ca5719.png)

以此类推，当一台设备请求下载的时候，我们可以让多台机器同时给它发送文件，每台机器只用发送一部分就好。

这里我圈了朵云，当作一个局域网，同样道理，不同的局域网之间也可以这样进行文件的传输。
在这里插入图片描述![3](https://user-images.githubusercontent.com/107662018/182082779-98df8fcb-2154-45b6-86d4-ae073846c65e.png)

这些百分比只是一个例子，在实际的实现中会根据情况进行调整。

注意这里我们传输的文件，并不只是一个文件，也可以是多个文件，或者是包含着多级目录的文件夹，文件格式当然除了文本文件、图片还包括视频等，都可以传输。

该项目的需求大致如下：

    支持资源管理，包括增删改查；
    支持多客户端同时发送和接收文件；
    支持服务器端参与资源发送；
    可配置发送端最大数量；
    支持多发送端，多文件的分片发送与接收；
    支持多发送端文件接收进度条；
    支持自定义分发策略，缺省时提供默认分发策略；
    支持自定义发送端负载均衡策略，缺省时提供默认负载均衡策略；
    支持断点续传。

和之前写的项目 CsFramework 一样，这个框架也要求要留出开放接口，可以在此基础上进行二次开发。
